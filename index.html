<!<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>prettyplan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css" />
    <script src="js/releases.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/parse.js"></script>
    <script src="js/render.js"></script>
    <script src="js/run.js"></script>
</head>

<body>
    <div class="stripe"></div>
    <div id="release-notification" class="hidden">Welcome to v1.2! <a href="#">View release notes?</a></div>
    <div id="branding">
        Source on <a href="https://github.com/chrislewisdev/prettyplan">GitHub</a><br />
        By <a href="https://twitter.com/chrislewisdev">Chris Lewis</a>
    </div>
    <div class="container">
        <h1>prettyplan</h1>
        <p>Just paste in your output from terraform plan (or use the provided example), and hit Prettify!</p>
        <textarea id="terraform-plan">
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

aws_alb_target_group.sample_app: Refreshing state... (ID: arn:aws:elasticloadbalancing:us-east-1:...up/sample-app/d5eedf0680cc9834)
aws_iam_role.service_role: Refreshing state... (ID: SampleApp)
aws_cloudwatch_log_group.sample_app: Refreshing state... (ID: sample-app)
aws_ecr_repository.sample_app: Refreshing state... (ID: sample-app)
aws_iam_role_policy.service_role_policy: Refreshing state... (ID: SampleApp:SampleApp)
null_resource.promote_images: Refreshing state... (ID: 1236159896537553123)
aws_ecs_task_definition.sample_app: Refreshing state... (ID: sample-app)
aws_alb_listener_rule.routing: Refreshing state... (ID: arn:aws:elasticloadbalancing:us-east-1:...94bc/2825bddee1920172/ec8bc47bb5409ead)
aws_ecs_service.sample_app: Refreshing state... (ID: arn:aws:ecs:us-east-1:123123123123:service/sample-app)

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
    ~ update in-place
-/+ destroy and then create replacement
    <= read (data resources)

Terraform will perform the following actions:

    <= data.external.ecr_image_digests
        id:                       <computed>
        program.#:                "1"
        program.0:                "extract-image-digests"
        result.%:                 <computed>

    ~ aws_ecs_service.sample_app
        task_definition:          "arn:aws:ecs:us-east-1:123123123123:task-definition/sample-app:186" => "${ aws_ecs_task_definition.sample_app.arn }"

-/+ aws_ecs_task_definition.sample_app (new resource required)
        id:                       "sample-app" => <computed> (forces new resource)
        arn:                      "arn:aws:ecs:us-east-1:123123123123:task-definition/sample-app:186" => <computed>
        container_definitions:    "[{\"cpu\":1,\"environment\":[],\"essential\":true,\"image\":\"123123123123.dkr.ecr.us-east-1.amazonaws.com/sample-app@sha256:18979dcf521de65f736585d30b58e8085ecc44560fa8c530ad1eb17fecad1cab\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"sample-app\",\"awslogs-region\":\"us-east-1\",\"awslogs-stream-prefix\":\"sample-app\"}},\"memory\":256,\"mountPoints\":[],\"name\":\"sample-app\",\"portMappings\":[{\"containerPort\":8443,\"hostPort\":0,\"protocol\":\"tcp\"}],\"volumesFrom\":[]}]" => "[\n  {\n    \"name\": \"sample-app\",\n    \"image\": \"${ aws_ecr_repository.sample_app.repository_url }@${ data.external.ecr_image_digests.result[\"sample-app\"] }\",\n    \"cpu\": 1,\n    \"memory\": 256,\n    \"essential\": true,\n    \"logConfiguration\": {\n      \"logDriver\": \"awslogs\",\n      \"options\": {\n        \"awslogs-group\": \"${ aws_cloudwatch_log_group.sample_app.name }\",\n        \"awslogs-region\": \"${ var.target_aws_region }\",\n        \"awslogs-stream-prefix\": \"sample-app\"\n      }\n    },\n    \"portMappings\": [\n      {\n        \"containerPort\": 8443,\n        \"hostPort\": 0\n      }\n    ]\n  }\n]\n" (forces new resource)
        family:                   "sample-app" => "sample-app"
        network_mode:             "" => <computed>
        revision:                 "186" => <computed>
        task_role_arn:            "arn:aws:iam::123123123123:role/SampleApp" => "arn:aws:iam::123123123123:role/SampleApp"

-/+ null_resource.promote_images (new resource required)
        id:                       "1236159896537553123" => <computed> (forces new resource)
        triggers.%:               "1" => "1"
        triggers.deploy_job_hash: "6c37ac7175bdf35e24a2f2755addd238" => "1a0bd86fc5831ee66858f2e159efa547" (forces new resource)


Plan: 2 to add, 1 to change, 2 to destroy.

------------------------------------------------------------------------

This plan was saved to: terraform.plan

To perform exactly these actions, run the following command to apply:
    terraform apply "terraform.plan"
        </textarea><br />
        <button onclick="run()">Prettify it!</button>
        <div id="parsing-error-message" class="hidden">That doesn't look like a Terraform plan. Did you copy the entire output
            (without colouring) from the plan command?</div>
        <div id="prettyplan" class="prettyplan hidden">
            <ul id="errors" class="errors"></ul>
            <ul id="warnings" class="warnings"></ul>
            <button class="expand-all" onclick="expandAll()">Expand all</button>
            <button class="collapse-all hidden" onclick="collapseAll()">Collapse all</button>
            <ul id="actions" class="actions"></ul>
        </div>
    </div>
    <div id="modal-pane"></div>
    <div id="modal-content">
        <div class="release-notes">
            <h1>Release Notes</h1>
            <h2>v1.1</h2>
            <ul>
                <li>Fixed #10 causing AWS IAM policies to be parsed incorrectly</li>
            </ul>
            <h2>v1.0</h2>
            <ul>
                <li>A nice lick of paint consistent with the Terraform branding</li>
                <li>Support for JSON prettification</li>
                <li>Works in all browsers</li>
                <li>Support for release note notifications :)</li>
            </ul>
        </div>
    </div>
</body>

</html>